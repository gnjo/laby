<pre style="letter-spacing:4px;font-family:monospace; line-height:1.0!important">
0000000000000000001111000110000000000000
0000000000000000011001111110100011111000
0001000000001111110000000011111211111000
0011110000001111100000000000000031111000
0111110000003111100000000011300000011000
0101110000000020000000000002000001110000
0100111100000010111100001131000111110000
1100001111110111110100000201111111110000
4100000110011110000111000101111101000000
0110000000000100000001110101001000000000
0011100000000000000111111111011000000000
0000110000000011300111111141110000000000
0000100000000002001111111101111000000000
0000111100000111011101000110111100000000
0001111110000111111111110110001100000000
0011000010001111100100011111010100000000
0111100010111010000000000111111100011300
0111110010100010000000000010111111211100
0101110040111110000000000010001110011100
0000100011111000000000000011114410000000
0000100011101000000000000000011010000000
0000200014101000001130000000010010000000
0011111000101000000200011111010010000000
0011111000002000000111211111040010000000
0031111000111110111110031111000010011300
0000100000111112111110000000000011211100
0000100000311110311110000000000010011100
0000200000011100000000000113010011000000
0011111000011000113000000020012111000000
0011111000010000020000000010030001010000
0031111000010000010000111110000101110000
0000000000011100011112111110000121110000
0000000000001110110000311110000301010000
0000000000000111110000000020000001010000
0000000000000201100000001111100001010000
0000000000011111000000001111100001010000
0000000000011111100000003111100001011000
0000000000031111112113000000000003002000
0000000000000000000000000000000000011300
0000000000000000000000000000000000000000
</pre>
# laby
```
Random walk like an ants and paste the room on labyrinth.
```
```
再現性のあるランダム生成迷宮「laby」の特徴
１．階層化可能。始点と終点を指定できる。
２．全ての道と部屋が繋がる。部屋数は指定できる。
３．接続点は必ず移動可能。生成ロジックは一筆書きのように歩いている。
４．シード値による再現性がある。乱数生成器付帯。計算機や言語に依存せず、同一。
５．十分な複雑さがある。部屋生成ロジックは道の隙間を埋めるように配置している。
６．ドアが窪みドアの条件を満たす。窪みドアは、020並びが縦か横に必ず現れる。
７．生成結果は文字列で保存できる。
```
https://codepen.io/gnjo/pen/gObJLKx?editors=1010

```
//history 
v0.10 fix thinks the finishwork recovery. fail door and wildcard copy     
v0.11 fix map symbol definition. all map symbol the string.
v0.20 stp wildcard copy issue. wildcard symbol * is transparent. stop, wildcard copy dont need to use.
v0.21 fix multi os issue PI=3.141592653589793
v0.30 fix fail door recovery. if failed the door, change to road. "2" to "1".
v0.31 fix simple return. map[h][w]
v0.32 fix quality info laby.getquality, 0-100 low to high
v0.33 fix dont relation PI
```
```
//pug
script(src="https://gnjo.github.io/laby/xors.js")
script(src="https://gnjo.github.io/laby/mu.js")
script(src="https://gnjo.github.io/laby/laby.js")
```
```
//usage
let a=laby({/*opts*/});
let seed=100
let map=a.gen(seed) //or a.gen(seed,sx,sy,ex,ey)
document.body.style.fontFamily="monospace";document.body.textContent=mu.map2str( map )
```
```
//opts
laby({
size:[40,40] //[width,height]
,point:8 //random points number
,roomrange:[4,12] //[min,max] room range
,finerate:60 //0-100 fuzzy to strict
//
})
```

# note
```
実測値の精度。
一億回に一回程度のマップ生成失敗。finerateが低いと失敗しやすい。
部屋は二割程度の確率で失敗する。多くの場合は隙間がない。確実に部屋数を確保するには十分に考慮する必要がある。
```
```
オプションの指標。
point: 4~
size: [20~,20~]
finerate: 30~
roomrange:[Math.floor(1.2*(w*h/35)/4), Math.floor((w*h/9)/4)] //

部屋の最少コストは九、最大コストは三十五。マップのサイズをコストで割り、部屋の占有率として考える。
指標はマップ全体の四分の一程度。部屋が隙間にみっしり詰まる事は考えにくい。
縦横４０マスなら１０から４０部屋程度。部屋は二割程度の確率で失敗する事が判っている為、割り増す。
```
```
//0 is exist.
function is(d){return (d||d===0)?true:false}
```
```
//bad door recovery. door is 020 or vertex 020.
130   130
120 > 110
110   110

//welldone door pattern
*1*    *0*
020 or 121
*1*    *0*
```
```
//symbol is string
wall="0"
road="1"
door="2"
object="3" //object is room object
event="4" //join point
```

```
//room pattern. the "3" is object, like a item.
000
030
000

00000
01130
00000

000
010
010
030
000

00000
01130
01110
01110
00000

0000000
0111110
0111110
0311110
0000000
```
